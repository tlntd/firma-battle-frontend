(window["webpackJsonpfirma-battle-frontend"]=window["webpackJsonpfirma-battle-frontend"]||[]).push([[0],{127:function(e,t,n){},128:function(e,t,n){},209:function(e,t,n){},235:function(e,t,n){},236:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(16),s=n.n(c),i=(n(90),n(18)),o=n(17),l=n(20),u=n(19),m=n(21),p=(n(91),n(9)),h=n.n(p),f=n(29),d=n.n(f),y=n(28),E=n.n(y),v=function(){return r.a.createElement(E.a,{bg:"light",expand:"md"},r.a.createElement(h.a,null,r.a.createElement(E.a.Brand,{href:"/#"},"Firma-battle"),r.a.createElement(E.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(E.a.Collapse,{id:"navbar"},r.a.createElement(d.a,{className:"mr-auto"},r.a.createElement(d.a.Link,{href:"/#kysymykset"},"Kysymykset"),r.a.createElement(d.a.Link,{href:"/#yritykset"},"Yritykset"),r.a.createElement(d.a.Link,{href:"/#faq"},"FAQ")))))},k=n(7),b=n.n(k),j=n(13),O=n(11),g=n.n(O),w=n(12),C=n.n(w),x=n(24),S=n.n(x),q=n(14),I=n.n(q),A="http://localhost:3000",N="http://localhost:3000/images",Q=n(35),D=n.n(Q),F=n(81),P=n(82);n(127);function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}var L={size:32,color1:"#07f9a5",color2:"#f488ff",color3:"#07f9a5",color4:"#ffd231"},M=function(e){var t=e.options,n=e.additionalClasses,a="Spinner";return n&&(a+=" "+n),r.a.createElement("div",{className:a},r.a.createElement(P.a,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(n,!0).forEach(function(t){Object(F.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},L,{options:t})))},T=(n(128),function(e){var t=e.question;return t&&t.scores?r.a.createElement(a.Fragment,null,r.a.createElement("h2",{className:"Scores-title"},t.pluralText),r.a.createElement(D.a,{striped:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,"Pisteet"),r.a.createElement("th",null,"Nimi"),r.a.createElement("th",null,"Voitot"),r.a.createElement("th",null,"Tappiot"))),r.a.createElement("tbody",null,function(e){return e.scores.map(function(e,t){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,t+1,"."),r.a.createElement("td",null,e.score),r.a.createElement("td",null,r.a.createElement("a",{href:"#yritykset-".concat(e.companyId)},e.name)),r.a.createElement("td",null,e.wins),r.a.createElement("td",null,e.scores-e.wins))})}(t)))):r.a.createElement(M,null)}),H=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=Object(j.a)(b.a.mark(function e(){var t;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.a.get("".concat(A,"/questions"));case 3:t=e.sent,this.props.updateState({questions:t.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(j.a)(b.a.mark(function e(){var t,n,a,r,c,s,i,o;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,n=t.hash,a=t.questions,r=t.updateState,!(c=parseInt(n.split("-")[1],10))){e.next=16;break}if(!(s=this.getQuestion())||s.scores){e.next=16;break}return e.prev=5,e.next=8,I.a.get("".concat(A,"/questions/").concat(c,"/scores"));case 8:i=e.sent,o=a.map(function(e){return e.id===c&&(e.scores=i.data),e}),r({questions:o}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),console.error(e.t0);case 16:case"end":return e.stop()}},e,this,[[5,13]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(h.a,null,r.a.createElement(g.a,null,r.a.createElement(C.a,null,this.defineContent())))}},{key:"defineContent",value:function(){return this.getQuestionsId()?r.a.createElement(T,{question:this.getQuestion()}):r.a.createElement(S.a,{variant:"flush"},this.renderQuestions())}},{key:"renderQuestions",value:function(){return this.props.questions.map(function(e){return r.a.createElement(S.a.Item,{key:e.id,action:!0,href:"#kysymykset-".concat(e.id)},e.pluralText)})}},{key:"getQuestionsId",value:function(){return parseInt(this.props.hash.split("-")[1],10)}},{key:"getQuestion",value:function(){var e=this;return this.props.questions.find(function(t){return t.id===e.getQuestionsId()})}}]),t}(a.Component),K=function(){return r.a.createElement(h.a,null,r.a.createElement(g.a,null,r.a.createElement(C.a,null,r.a.createElement("h3",null,"Mik\xe4 t\xe4m\xe4 on?"),r.a.createElement("p",null,"Hauska peli jonka tein tyypatessa ",r.a.createElement("a",{href:"https://nestjs.com/"},"Nest.js"),":\xe4\xe4. Vaikuttaa ihan hauskalta freimikselt\xe4."),r.a.createElement("hr",null),r.a.createElement("h3",null,"Miten t\xe4m\xe4 toimii?"),r.a.createElement("p",null,"Helposti: arvotaan ensin kysymys ja siihen kaksi yrityst\xe4. K\xe4ytt\xe4j\xe4 valitsee yrityksen joka vastaa kysymykseen h\xe4nen mielest\xe4 paremmin. Pisteet lasketaan kysymyksitt\xe4in k\xe4ytt\xe4en vanha kunnon (Clanbasesta tuttua) ",r.a.createElement("a",{href:"https://en.wikipedia.org/wiki/Elo_rating_system"},"ELO-lukua"),"."),r.a.createElement("hr",null),r.a.createElement("h3",null,"Miten saan yritykseni mukaan?"),r.a.createElement("p",null,"Heit\xe4 ehdotus yrityksest\xe4 minulle meilitse: ",r.a.createElement("a",{href:"mailto:teemu@talented.fi?subject=Uusi%20yritys%20Firma-battleen&body=Heippa%2C%0A%0Alis%C3%A4tk%C3%A4%C3%A4%20t%C3%A4m%C3%A4%20yritys%20Firma-battleen%3A%0A%0AYritys%3A%20%0AKotisivu%3A%20%0A%0AKiitos!"},"teemu@talented.fi"),"."))))},z=n(37),U=n(84),V=n.n(U),J=n(36),Y=n.n(J),_=n(23),G=n(49),R=n.n(G),W=n(50),X=n.n(W),Z=n(48),$=n(38),ee=(n(209),function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state=t.getEmptyState(),n.handleClose=n.handleClose.bind(Object(_.a)(n)),n.loadQuestion=n.loadQuestion.bind(Object(_.a)(n)),n.voteForCompany=n.voteForCompany.bind(Object(_.a)(n)),n}return Object(m.a)(t,e),Object(o.a)(t,null,[{key:"getEmptyState",value:function(){return{question:void 0,companies:[],results:void 0,voteLoading:!1}}}]),Object(o.a)(t,[{key:"handleClose",value:function(){this.props.onClose(),this.setState(t.getEmptyState())}},{key:"render",value:function(){var e=this.props.showing;return r.a.createElement(R.a,{centered:!0,size:"xl",show:e,onEntered:this.loadQuestion,onHide:this.handleClose,"aria-labelledby":"example-modal-sizes-title-lg"},r.a.createElement(R.a.Body,null,this.defineContent()))}},{key:"defineContent",value:function(){var e=this.state,t=e.question,n=Object(z.a)(e.companies,2),a=n[0],c=n[1];return t&&a&&c?this.renderBody(t,a,c):r.a.createElement(M,null)}},{key:"renderBody",value:function(e,t,n){return r.a.createElement(h.a,null,r.a.createElement(g.a,null,r.a.createElement(C.a,null,r.a.createElement("h3",null,e.text))),r.a.createElement(g.a,null,this.renderCompany(t),this.renderCompany(n)))}},{key:"renderCompany",value:function(e){return r.a.createElement(C.a,null,r.a.createElement(X.a,null,r.a.createElement(X.a.Img,{variant:"top",src:"".concat(N,"/").concat(e.logo)}),this.renderButton(e)))}},{key:"renderButton",value:function(e){var t=this,n=this.state,a=n.voteLoading,c=n.results,s=$.a.create({up:{animationName:Z.fadeOutUp,animationDuration:"2.5s"},down:{animationName:Z.fadeOutDown,animationDuration:"2.5s"}});return a&&e.winner?r.a.createElement(M,null):c&&e.winner?r.a.createElement("h4",{className:"score-up text-success ".concat(Object($.b)(s.up))},"+",c.winnerDelta," pistett\xe4"):c?r.a.createElement("h4",{className:"score-down text-danger ".concat(Object($.b)(s.down))},c.loserDelta," pistett\xe4"):r.a.createElement(Y.a,{variant:"primary",onClick:function(){return t.voteForCompany(e.id)}},e.name)}},{key:"loadQuestion",value:function(){var e=Object(j.a)(b.a.mark(function e(){var t,n;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.a.get("".concat(A,"/companies/random"));case 3:return t=e.sent,e.next=6,I.a.get("".concat(A,"/questions/random"));case 6:n=e.sent,this.setState({companies:t.data,question:n.data}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}},e,this,[[0,10]])}));return function(){return e.apply(this,arguments)}}()},{key:"voteForCompany",value:function(e){var n=this;try{var a=this.state.companies.map(function(t){return t.winner=Boolean(t.id===e),t});this.setState({companies:a},Object(j.a)(b.a.mark(function a(){var r,c,s;return b.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r=n.state.companies.find(function(t){return t.id!==e}).id,c=n.state.question.id,a.next=4,I.a.post("".concat(A,"/vote"),{winnerId:e,loserId:r,questionId:c});case 4:s=a.sent,n.setState({results:s.data},function(){setTimeout(function(){n.setState(t.getEmptyState(),function(){n.loadQuestion()})},2e3)});case 6:case"end":return a.stop()}},a)})))}catch(r){console.error(r)}}}]),t}(a.Component)),te=function(){var e=Object(a.useState)(!1),t=Object(z.a)(e,2),n=t[0],c=t[1];return r.a.createElement(h.a,null,r.a.createElement(g.a,null,r.a.createElement(C.a,null,r.a.createElement(V.a,{fluid:!0},r.a.createElement(h.a,null,r.a.createElement("h1",null,"Firma-battle!"),r.a.createElement("h5",{className:"font-weight-normal"},"Mihin tarvii faktaa kun on fiilist\xe4? Nyt laitetaan Suomen IT-alan firmat oikeasti j\xe4rjestykseen."),r.a.createElement("hr",null),r.a.createElement("p",null,r.a.createElement(Y.a,{size:"lg",variant:"primary",onClick:function(){return c(!0)}},"Aloita")))))),r.a.createElement(ee,{showing:n,onClose:function(){return c(!1)}}))},ne=(n(235),function(e){var t=e.company,n=e.scores;return t&&n&&n.length?r.a.createElement(a.Fragment,null,r.a.createElement("h2",{className:"Scores-title"},t.name),r.a.createElement(D.a,{striped:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Vastustaja"),r.a.createElement("th",null,"Kysymys"),r.a.createElement("th",null,"Pisteet"),r.a.createElement("th",null))),r.a.createElement("tbody",null,function(e){return e.map(function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,r.a.createElement("a",{href:"#yritykset-".concat(e.opponentId)},e.opponentName)),r.a.createElement("td",null,r.a.createElement("a",{href:"#kysymykset-".concat(e.questionId)},e.questionText)),function(e){if(e>=0)return r.a.createElement("td",{className:"text-success"},"+",e);return r.a.createElement("td",{className:"text-danger"},e)}(e.delta),function(e){if(e>=0)return r.a.createElement("td",null,r.a.createElement("div",{className:"arrow-up"}));return r.a.createElement("td",null,r.a.createElement("div",{className:"arrow-down"}))}(e.delta))})}(n)))):r.a.createElement(M,null)}),ae=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=Object(j.a)(b.a.mark(function e(){var t;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.a.get("".concat(A,"/companies"));case 3:t=e.sent,this.props.updateState({companies:t.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(j.a)(b.a.mark(function e(){var t,n;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.getCompanyId())){e.next=8;break}if(!(n=this.getCompany())||n.questions){e.next=8;break}return e.next=6,this.fetchQuestions(t);case 6:return e.next=8,this.fetchScores(t);case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(h.a,null,r.a.createElement(g.a,null,r.a.createElement(C.a,null,this.defineContent())))}},{key:"defineContent",value:function(){if(this.getCompanyId()){var e=this.getCompany();return r.a.createElement(ne,{company:e,scores:e&&e.scores})}return r.a.createElement(S.a,{variant:"flush"},this.renderCompanies())}},{key:"renderCompanies",value:function(){return this.props.companies.map(function(e){return r.a.createElement(S.a.Item,{key:e.id,action:!0,href:"#yritykset-".concat(e.id)},e.name)})}},{key:"fetchQuestions",value:function(){var e=Object(j.a)(b.a.mark(function e(t){var n,a,r,c,s;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props,a=n.companies,r=n.updateState,e.prev=1,e.next=4,I.a.get("".concat(A,"/companies/").concat(t,"/questions"));case 4:c=e.sent,s=a.map(function(e){return e.id===t&&(e.questions=c.data),e}),r({companies:s}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0);case 12:case"end":return e.stop()}},e,this,[[1,9]])}));return function(t){return e.apply(this,arguments)}}()},{key:"fetchScores",value:function(){var e=Object(j.a)(b.a.mark(function e(t){var n,a,r,c,s;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props,a=n.companies,r=n.updateState,e.prev=1,e.next=4,I.a.get("".concat(A,"/companies/").concat(t,"/scores"));case 4:c=e.sent,s=a.map(function(e){return e.id===t&&(e.scores=c.data),e}),r({companies:s}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0);case 12:case"end":return e.stop()}},e,this,[[1,9]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getCompanyId",value:function(){return parseInt(this.props.hash.split("-")[1],10)}},{key:"getCompany",value:function(){var e=this;return this.props.companies.find(function(t){return t.id===e.getCompanyId()})}}]),t}(a.Component),re=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={hash:document.location.hash,questions:[],companies:[]},n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("hashchange",function(){e.setState({hash:document.location.hash})})}},{key:"render",value:function(){return r.a.createElement(a.Fragment,null,r.a.createElement(v,null),r.a.createElement("div",{className:"App"},this.defineContent()))}},{key:"defineContent",value:function(){var e=this,t=this.state,n=t.hash,a=t.questions,c=t.companies;return n.includes("#kysymykset")?r.a.createElement(H,{hash:n,questions:a,updateState:function(t){return e.setState(t)}}):n.includes("#yritykset")?r.a.createElement(ae,{hash:n,companies:c,updateState:function(t){return e.setState(t)}}):"#faq"===n?r.a.createElement(K,null):r.a.createElement(te,null)}}]),t}(a.Component);s.a.render(r.a.createElement(re,null),document.getElementById("root"))},85:function(e,t,n){e.exports=n(236)},90:function(e,t,n){},91:function(e,t,n){}},[[85,1,2]]]);
//# sourceMappingURL=main.568511df.chunk.js.map