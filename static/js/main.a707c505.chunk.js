(window["webpackJsonpfirma-battle-frontend"]=window["webpackJsonpfirma-battle-frontend"]||[]).push([[0],{110:function(e,t,n){},129:function(e,t,n){},130:function(e,t,n){},211:function(e,t,n){},236:function(e,t,n){},237:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(16),s=n.n(i),c=(n(91),n(18)),o=n(17),l=n(20),u=n(19),m=n(21),p=(n(92),n(9)),h=n.n(p),f=n(29),d=n.n(f),E=n(22),y=n.n(E),v=function(){return r.a.createElement(y.a,{bg:"light",expand:"md"},r.a.createElement(h.a,null,r.a.createElement(y.a.Brand,{href:"/#"},"Firmabattle"),r.a.createElement(y.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(y.a.Collapse,{id:"navbar"},r.a.createElement(d.a,{className:"mr-auto"},r.a.createElement(d.a.Link,{href:"/#tulokset"},"Tulokset"),r.a.createElement(d.a.Link,{href:"/#yritykset"},"Yritykset"),r.a.createElement(d.a.Link,{href:"/#faq"},"FAQ")))))},k=(n(110),function(e){return e.hash?null:r.a.createElement(y.a,{bg:"light",fixed:"bottom"},r.a.createElement("p",{className:"Footer-text"},"T\xe4m\xe4n sivun tekiv\xe4t ",r.a.createElement("a",{href:"https://github.com/varmais"},"Teemu Tiilikainen")," ja ",r.a.createElement("a",{href:"https://talented.fi"},"Talented")," \u2013 Talented auttaa tekij\xf6it\xe4 l\xf6yt\xe4m\xe4\xe4n parhaat firmat ja huonoja firmoja tulemaan paremmiksi."))}),b=n(7),j=n.n(b),g=n(13),O=n(10),w=n.n(O),C=n(11),x=n.n(C),S=n(25),q=n.n(S),N=n(14),I=n.n(N),Q="https://firma-battle-api.herokuapp.com",A={api_endpoint:Q,image_endpoint:"".concat(Q,"/images")},F=n(35),D=n.n(F),T=n(82),P=n(83);n(129);function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}var M={size:32,color1:"#07f9a5",color2:"#f488ff",color3:"#07f9a5",color4:"#ffd231"},B=function(e){var t=e.options,n=e.additionalClasses,a="Spinner";return n&&(a+=" "+n),r.a.createElement("div",{className:a},r.a.createElement(P.a,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(n,!0).forEach(function(t){Object(T.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},M,{options:t})))},L=(n(130),function(e){var t=e.question;return t&&t.scores?r.a.createElement(a.Fragment,null,r.a.createElement("h2",{className:"Scores-title"},t.pluralText),r.a.createElement(D.a,{striped:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,"Pisteet"),r.a.createElement("th",null,"Nimi"),r.a.createElement("th",null,"Voitot"),r.a.createElement("th",null,"Tappiot"))),r.a.createElement("tbody",null,function(e){return e.scores.map(function(e,t){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,t+1,"."),r.a.createElement("td",null,e.score),r.a.createElement("td",null,r.a.createElement("a",{href:"#yritykset-".concat(e.companyId)},e.name)),r.a.createElement("td",null,e.wins),r.a.createElement("td",null,e.scores-e.wins))})}(t)))):r.a.createElement(B,null)}),H=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=Object(g.a)(j.a.mark(function e(){var t;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.a.get("".concat(A.api_endpoint,"/questions"));case 3:t=e.sent,this.props.updateState({questions:t.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(g.a)(j.a.mark(function e(){var t,n,a,r,i,s,c,o;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,n=t.hash,a=t.questions,r=t.updateState,!(i=parseInt(n.split("-")[1],10))){e.next=16;break}if(!(s=this.getQuestion())||s.scores){e.next=16;break}return e.prev=5,e.next=8,I.a.get("".concat(A.api_endpoint,"/questions/").concat(i,"/scores"));case 8:c=e.sent,o=a.map(function(e){return e.id===i&&(e.scores=c.data),e}),r({questions:o}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),console.error(e.t0);case 16:case"end":return e.stop()}},e,this,[[5,13]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(h.a,null,r.a.createElement(w.a,null,r.a.createElement(x.a,null,this.defineContent())))}},{key:"defineContent",value:function(){return this.getQuestionsId()?r.a.createElement(L,{question:this.getQuestion()}):r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",{className:"Scores-title"},"Valitse kysymys"),r.a.createElement(q.a,{variant:"flush"},this.renderQuestions()))}},{key:"renderQuestions",value:function(){return this.props.questions.map(function(e){return r.a.createElement(q.a.Item,{key:e.id,action:!0,href:"#tulokset-".concat(e.id)},e.pluralText)})}},{key:"getQuestionsId",value:function(){return parseInt(this.props.hash.split("-")[1],10)}},{key:"getQuestion",value:function(){var e=this;return this.props.questions.find(function(t){return t.id===e.getQuestionsId()})}}]),t}(a.Component),z=function(){return r.a.createElement(h.a,null,r.a.createElement(w.a,null,r.a.createElement(x.a,null,r.a.createElement("h3",null,"Mik\xe4 t\xe4m\xe4 on?"),r.a.createElement("p",null,"Hauska peli jonka tein tyypatessa ",r.a.createElement("a",{href:"https://nestjs.com/"},"Nest.js"),":\xe4\xe4. Vaikuttaa ihan hauskalta freimikselt\xe4."),r.a.createElement("hr",null),r.a.createElement("h3",null,"Miten t\xe4m\xe4 toimii?"),r.a.createElement("p",null,"Helposti: arvotaan ensin kysymys ja siihen kaksi yrityst\xe4. K\xe4ytt\xe4j\xe4 valitsee yrityksen joka vastaa kysymykseen h\xe4nen mielest\xe4\xe4n paremmin. Pisteet lasketaan kysymyksitt\xe4in k\xe4ytt\xe4en vanhaa kunnon (Clanbasesta tuttua) ",r.a.createElement("a",{href:"https://en.wikipedia.org/wiki/Elo_rating_system"},"ELO-lukua"),"."),r.a.createElement("hr",null),r.a.createElement("h3",null,"Miten saan yritykseni mukaan?"),r.a.createElement("p",null,"Heit\xe4 ehdotus yrityksest\xe4 meilitse: ",r.a.createElement("a",{href:"mailto:teemu@talented.fi?subject=Uusi%20yritys%20Firmabattleen&body=Heippa%2C%0A%0Alis%C3%A4tk%C3%A4%C3%A4%20t%C3%A4m%C3%A4%20yritys%20Firmabattleen%3A%0A%0AYritys%3A%20%0AKotisivu%3A%20%0A%0AKiitos!"},"teemu@talented.fi"),"."))))},K=n(37),U=n(85),V=n.n(U),J=n(36),Y=n.n(J),G=n(24),R=n(50),W=n.n(R),X=n(51),Z=n.n(X),$=n(48),ee=n.n($),te=n(49),ne=n(38),ae=(n(211),function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).newQuestion=function(){n.setState(t.getEmptyState(),function(){n.loadQuestion()})},n.state=t.getEmptyState(),n.handleClose=n.handleClose.bind(Object(G.a)(n)),n.loadQuestion=n.loadQuestion.bind(Object(G.a)(n)),n.voteForCompany=n.voteForCompany.bind(Object(G.a)(n)),n}return Object(m.a)(t,e),Object(o.a)(t,null,[{key:"getEmptyState",value:function(){return{question:void 0,companies:[],results:void 0}}}]),Object(o.a)(t,[{key:"handleClose",value:function(){this.props.onClose(),this.setState(t.getEmptyState())}},{key:"render",value:function(){var e=this.props.showing;return r.a.createElement(W.a,{centered:!0,size:"lg",show:e,onEntered:this.loadQuestion,onHide:this.handleClose,"aria-labelledby":"example-modal-sizes-title-lg"},r.a.createElement(ee.a,{closeButton:!0}),r.a.createElement(W.a.Body,null,this.defineContent()))}},{key:"defineContent",value:function(){var e=this.state,t=e.question,n=Object(K.a)(e.companies,2),a=n[0],i=n[1];return t&&a&&i?this.renderBody(t,a,i):r.a.createElement(B,null)}},{key:"renderBody",value:function(e,t,n){var a=this;return r.a.createElement(h.a,null,r.a.createElement(w.a,null,r.a.createElement(x.a,null,r.a.createElement("h3",null,e.text))),r.a.createElement(w.a,null,this.renderCompany(t),this.renderCompany(n)),r.a.createElement(w.a,null,r.a.createElement(x.a,null,r.a.createElement("div",{className:"Modal-links"},r.a.createElement(Y.a,{variant:"link",onClick:function(){return a.newQuestion()}},"Skippaa"),r.a.createElement("a",{className:"btn btn-link",href:"#tulokset"},"Tulokset")))))}},{key:"renderCompany",value:function(e){var t=this;return r.a.createElement(x.a,null,r.a.createElement(Z.a,null,r.a.createElement(Z.a.Img,{variant:"top",src:"".concat(A.image_endpoint,"/").concat(e.logo),alt:e.name,onClick:function(){return t.voteForCompany(e.id)}}),this.renderPoints(e)))}},{key:"renderPoints",value:function(e){var t=this.state.results,n=ne.a.create({up:{animationName:te.fadeOutUp,animationDuration:"2.5s"},down:{animationName:te.fadeOutDown,animationDuration:"2.5s"}});return t&&e.winner?r.a.createElement("h4",{className:"score-up text-success ".concat(Object(ne.b)(n.up))},"+",t.winnerDelta," pistett\xe4"):t?r.a.createElement("h4",{className:"score-down text-danger ".concat(Object(ne.b)(n.down))},t.loserDelta," pistett\xe4"):void 0}},{key:"loadQuestion",value:function(){var e=Object(g.a)(j.a.mark(function e(){var t,n;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.a.get("".concat(A.api_endpoint,"/companies/random"));case 3:return t=e.sent,e.next=6,I.a.get("".concat(A.api_endpoint,"/questions/random"));case 6:n=e.sent,this.setState({companies:t.data,question:n.data}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}},e,this,[[0,10]])}));return function(){return e.apply(this,arguments)}}()},{key:"voteForCompany",value:function(e){var t=this;try{var n=this.state.companies.map(function(t){return t.winner=Boolean(t.id===e),t});this.setState({companies:n},Object(g.a)(j.a.mark(function n(){var a,r,i;return j.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a=t.state.companies.find(function(t){return t.id!==e}).id,r=t.state.question.id,n.next=4,I.a.post("".concat(A.api_endpoint,"/vote"),{winnerId:e,loserId:a,questionId:r});case 4:i=n.sent,t.setState({results:i.data},function(){setTimeout(function(){t.newQuestion()},2e3)});case 6:case"end":return n.stop()}},n)})))}catch(a){console.error(a)}}}]),t}(a.Component)),re=function(){var e=Object(a.useState)(!1),t=Object(K.a)(e,2),n=t[0],i=t[1];return r.a.createElement(h.a,null,r.a.createElement(w.a,null,r.a.createElement(x.a,null,r.a.createElement(V.a,{fluid:!0},r.a.createElement(h.a,null,r.a.createElement("h1",null,"Firmabattle!"),r.a.createElement("h5",{className:"font-weight-normal"},"Mihin tarvii faktaa kun on fiilist\xe4? Nyt laitetaan Suomen IT-alan firmat oikeasti j\xe4rjestykseen."),r.a.createElement("p",null,"Firmabattlessa valitset voittajan sen mukaan, kumpi yritys sinun mielest\xe4si vastaa paremmin annettuun kysymykseen. Pisteenlasku ja ranking perustuu Clanbasesta tuttuun ELO-j\xe4rjestelm\xe4\xe4n, ja tuloksia p\xe4\xe4set katsomaan ",r.a.createElement("a",{href:"#tulokset"},"t\xe4\xe4lt\xe4"),"."),r.a.createElement("p",null,r.a.createElement(Y.a,{size:"lg",variant:"primary",onClick:function(){return i(!0)}},"Aloita")))))),r.a.createElement(ae,{showing:n,onClose:function(){return i(!1)}}))},ie=(n(236),function(e){var t=e.company,n=e.scores;return t&&n&&n.length?r.a.createElement(a.Fragment,null,r.a.createElement("h2",{className:"Scores-title"},t.name),r.a.createElement(D.a,{striped:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Kysymys"),r.a.createElement("th",null,"Vastustaja"),r.a.createElement("th",null,"Me"),r.a.createElement("th",null,"Ne"),r.a.createElement("th",null))),r.a.createElement("tbody",null,function(e){return e.map(function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,r.a.createElement("a",{href:"#tulokset-".concat(e.questionId)},e.questionText)),r.a.createElement("td",null,r.a.createElement("a",{href:"#yritykset-".concat(e.opponentId)},e.opponentName)),function(e){if(e>=0)return r.a.createElement("td",{className:"text-success"},"+",e);return r.a.createElement("td",{className:"text-danger"},e)}(e.delta),function(e){var t=-1*e;if(t>=0)return r.a.createElement("td",{className:"text-success"},"+",t);return r.a.createElement("td",{className:"text-danger"},t)}(e.delta),function(e){if(e>=0)return r.a.createElement("td",null,r.a.createElement("div",{className:"arrow-up"}));return r.a.createElement("td",null,r.a.createElement("div",{className:"arrow-down"}))}(e.delta))})}(n)))):r.a.createElement(B,null)}),se=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=Object(g.a)(j.a.mark(function e(){var t;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.a.get("".concat(A.api_endpoint,"/companies"));case 3:t=e.sent,this.props.updateState({companies:t.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(g.a)(j.a.mark(function e(){var t,n;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.getCompanyId())){e.next=8;break}if(!(n=this.getCompany())||n.questions){e.next=8;break}return e.next=6,this.fetchQuestions(t);case 6:return e.next=8,this.fetchScores(t);case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(h.a,null,r.a.createElement(w.a,null,this.defineContent()))}},{key:"defineContent",value:function(){var e=this;if(this.getCompanyId()){var t=this.getCompany();return r.a.createElement(ie,{company:t,scores:t&&t.scores})}return this.props.companies.reduce(function(e,t,n){return n%3===0?e[0].push(t):n%2===0?e[1].push(t):e[2].push(t),e},[[],[],[]]).map(function(t){return r.a.createElement(x.a,null,r.a.createElement(q.a,{variant:"flush"},e.renderCompanies(t)))})}},{key:"renderCompanies",value:function(e){return e.map(function(e){return r.a.createElement(q.a.Item,{key:e.id,action:!0,href:"#yritykset-".concat(e.id)},e.name)})}},{key:"fetchQuestions",value:function(){var e=Object(g.a)(j.a.mark(function e(t){var n,a,r,i,s;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props,a=n.companies,r=n.updateState,e.prev=1,e.next=4,I.a.get("".concat(A.api_endpoint,"/companies/").concat(t,"/questions"));case 4:i=e.sent,s=a.map(function(e){return e.id===t&&(e.questions=i.data),e}),r({companies:s}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0);case 12:case"end":return e.stop()}},e,this,[[1,9]])}));return function(t){return e.apply(this,arguments)}}()},{key:"fetchScores",value:function(){var e=Object(g.a)(j.a.mark(function e(t){var n,a,r,i,s;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props,a=n.companies,r=n.updateState,e.prev=1,e.next=4,I.a.get("".concat(A.api_endpoint,"/companies/").concat(t,"/scores"));case 4:i=e.sent,s=a.map(function(e){return e.id===t&&(e.scores=i.data),e}),r({companies:s}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0);case 12:case"end":return e.stop()}},e,this,[[1,9]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getCompanyId",value:function(){return parseInt(this.props.hash.split("-")[1],10)}},{key:"getCompany",value:function(){var e=this;return this.props.companies.find(function(t){return t.id===e.getCompanyId()})}}]),t}(a.Component),ce=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={hash:document.location.hash,questions:[],companies:[]},n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("hashchange",function(){e.setState({hash:document.location.hash})})}},{key:"render",value:function(){return r.a.createElement(a.Fragment,null,r.a.createElement(v,null),r.a.createElement("div",{className:"App"},this.defineContent()),r.a.createElement(k,{hash:this.state.hash}))}},{key:"defineContent",value:function(){var e=this,t=this.state,n=t.hash,a=t.questions,i=t.companies;return n.includes("#tulokset")?r.a.createElement(H,{hash:n,questions:a,updateState:function(t){return e.setState(t)}}):n.includes("#yritykset")?r.a.createElement(se,{hash:n,companies:i,updateState:function(t){return e.setState(t)}}):"#faq"===n?r.a.createElement(z,null):r.a.createElement(re,null)}}]),t}(a.Component);s.a.render(r.a.createElement(ce,null),document.getElementById("root"))},86:function(e,t,n){e.exports=n(237)},91:function(e,t,n){},92:function(e,t,n){}},[[86,1,2]]]);
//# sourceMappingURL=main.a707c505.chunk.js.map